<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>aglet/pixelbuffer</title>
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);


  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', "dark");
    toggleSwitch.checked = true;
  } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', "light");
    toggleSwitch.checked = false;
  } else {
    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
    if (currentTheme) {
      document.documentElement.setAttribute('data-theme', currentTheme);

      if (currentTheme === 'dark') {
        toggleSwitch.checked = true;
      }
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">aglet/pixelbuffer</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#PixelBuffer"
    title="PixelBuffer = ref object
  window: Window
  gl: OpenGl
  id: GlUint
  size*: Natural               ## the data store&apos;s size in bytes
  data*: pointer               ## the data store mapped to process memory"><wbr />Pixel<wbr />Buffer<span class="attachedType"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#map%2CPixelBuffer%2CAccessMode"
    title="map(buffer: PixelBuffer; access: AccessMode)"><wbr />map<span class="attachedType">PixelBuffer</span></a></li>
  <li><a class="reference" href="#unmap%2CPixelBuffer"
    title="unmap(buffer: PixelBuffer)"><wbr />unmap<span class="attachedType">PixelBuffer</span></a></li>
  <li><a class="reference" href="#ensureSize%2CPixelBuffer%2CNatural"
    title="ensureSize(buffer: PixelBuffer; size: Natural)"><wbr />ensure<wbr />Size<span class="attachedType">PixelBuffer</span></a></li>
  <li><a class="reference" href="#newPixelBuffer%2CWindow"
    title="newPixelBuffer(window: Window): PixelBuffer"><wbr />new<wbr />Pixel<wbr />Buffer<span class="attachedType">PixelBuffer</span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#packUse.t%2CPixelBuffer%2Cuntyped"
    title="packUse(buffer: PixelBuffer; body: untyped): untyped"><wbr />pack<wbr />Use<span class="attachedType">PixelBuffer</span></a></li>
  <li><a class="reference" href="#unpackUse.t%2CPixelBuffer%2Cuntyped"
    title="unpackUse(buffer: PixelBuffer; body: untyped): untyped"><wbr />unpack<wbr />Use<span class="attachedType">PixelBuffer</span></a></li>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc">Pixel buffer objects, used internally for async download operations.</p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="enums.html">enums</a>, <a class="reference external" href="gl.html">gl</a>, <a class="reference external" href="window.html">window</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<a id="PixelBuffer"></a>
<dt><pre><a href="pixelbuffer.html#PixelBuffer"><span class="Identifier">PixelBuffer</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Identifier">window</span><span class="Other">:</span> <a href="window.html#Window"><span class="Identifier">Window</span></a>
  <span class="Identifier">gl</span><span class="Other">:</span> <a href="gl.html#OpenGl"><span class="Identifier">OpenGl</span></a>
  <span class="Identifier">id</span><span class="Other">:</span> <a href="gl_types.html#GlUint"><span class="Identifier">GlUint</span></a>
  <span class="Identifier">size</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Natural</span>               <span class="Comment">## the data store's size in bytes</span>
  <span class="Identifier">data</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">pointer</span>               <span class="Comment">## the data store mapped to process memory</span>
  </pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/liquid600pgm/aglet/tree/0.3.0/src/aglet/pixelbuffer.nim#L8"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/liquid600pgm/aglet/edit/devel/src/aglet/pixelbuffer.nim#L8" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<a id="map,PixelBuffer,AccessMode"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#map%2CPixelBuffer%2CAccessMode"><span class="Identifier">map</span></a><span class="Other">(</span><span class="Identifier">buffer</span><span class="Other">:</span> <a href="pixelbuffer.html#PixelBuffer"><span class="Identifier">PixelBuffer</span></a><span class="Other">;</span> <span class="Identifier">access</span><span class="Other">:</span> <a href="enums.html#AccessMode"><span class="Identifier">AccessMode</span></a><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Maps the pixel buffer to the process's virtual memory and sets the <tt class="docutils literal"><span class="pre">data</span></tt> field to a pointer to its first element. This field can then be cast to <tt class="docutils literal"><span class="pre">ptr UncheckedArray[T]</span></tt>, where T is your pixel type.
&nbsp;&nbsp;<a
href="https://github.com/liquid600pgm/aglet/tree/0.3.0/src/aglet/pixelbuffer.nim#L34"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/liquid600pgm/aglet/edit/devel/src/aglet/pixelbuffer.nim#L34" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="unmap,PixelBuffer"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#unmap%2CPixelBuffer"><span class="Identifier">unmap</span></a><span class="Other">(</span><span class="Identifier">buffer</span><span class="Other">:</span> <a href="pixelbuffer.html#PixelBuffer"><span class="Identifier">PixelBuffer</span></a><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Unmaps the pixel buffer's data store from virtual memory.
&nbsp;&nbsp;<a
href="https://github.com/liquid600pgm/aglet/tree/0.3.0/src/aglet/pixelbuffer.nim#L44"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/liquid600pgm/aglet/edit/devel/src/aglet/pixelbuffer.nim#L44" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="ensureSize,PixelBuffer,Natural"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#ensureSize%2CPixelBuffer%2CNatural"><span class="Identifier">ensureSize</span></a><span class="Other">(</span><span class="Identifier">buffer</span><span class="Other">:</span> <a href="pixelbuffer.html#PixelBuffer"><span class="Identifier">PixelBuffer</span></a><span class="Other">;</span> <span class="Identifier">size</span><span class="Other">:</span> <span class="Identifier">Natural</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Ensures that the pixel buffer has the given amount of bytes of storage. This unmaps the data store from virtual memory if the size does not match the size of the currently allocated store, so be careful!
&nbsp;&nbsp;<a
href="https://github.com/liquid600pgm/aglet/tree/0.3.0/src/aglet/pixelbuffer.nim#L52"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/liquid600pgm/aglet/edit/devel/src/aglet/pixelbuffer.nim#L52" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="newPixelBuffer,Window"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#newPixelBuffer%2CWindow"><span class="Identifier">newPixelBuffer</span></a><span class="Other">(</span><span class="Identifier">window</span><span class="Other">:</span> <a href="window.html#Window"><span class="Identifier">Window</span></a><span class="Other">)</span><span class="Other">:</span> <a href="pixelbuffer.html#PixelBuffer"><span class="Identifier">PixelBuffer</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Creates a new pixel buffer with no storage. <tt class="docutils literal"><span class="pre">ensureSize</span></tt> must be then used to allocate storage space for the buffer.
&nbsp;&nbsp;<a
href="https://github.com/liquid600pgm/aglet/tree/0.3.0/src/aglet/pixelbuffer.nim#L67"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/liquid600pgm/aglet/edit/devel/src/aglet/pixelbuffer.nim#L67" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<a id="packUse.t,PixelBuffer,untyped"></a>
<dt><pre><span class="Keyword">template</span> <a href="#packUse.t%2CPixelBuffer%2Cuntyped"><span class="Identifier">packUse</span></a><span class="Other">(</span><span class="Identifier">buffer</span><span class="Other">:</span> <a href="pixelbuffer.html#PixelBuffer"><span class="Identifier">PixelBuffer</span></a><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Use the pixel buffer for packing for the lifetime of the block. This is implemented differently from the other modules, because pixel buffers should always be unbound after you're finished with them. Otherwise it might mess up synchronous pixel read operations.
&nbsp;&nbsp;<a
href="https://github.com/liquid600pgm/aglet/tree/0.3.0/src/aglet/pixelbuffer.nim#L15"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/liquid600pgm/aglet/edit/devel/src/aglet/pixelbuffer.nim#L15" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="unpackUse.t,PixelBuffer,untyped"></a>
<dt><pre><span class="Keyword">template</span> <a href="#unpackUse.t%2CPixelBuffer%2Cuntyped"><span class="Identifier">unpackUse</span></a><span class="Other">(</span><span class="Identifier">buffer</span><span class="Other">:</span> <a href="pixelbuffer.html#PixelBuffer"><span class="Identifier">PixelBuffer</span></a><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Use the pixel buffer for unpacking for the lifetime of the block.
&nbsp;&nbsp;<a
href="https://github.com/liquid600pgm/aglet/tree/0.3.0/src/aglet/pixelbuffer.nim#L26"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/liquid600pgm/aglet/edit/devel/src/aglet/pixelbuffer.nim#L26" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2020-07-12 11:53:58 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
